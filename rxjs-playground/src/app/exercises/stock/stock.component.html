<div class="row">
    <div class="col col-4 offset-md-4 text-center">
            <div class="alert alert-danger">
                <div class="small">Aktueller Goldkurs:</div>
                <div><strong>{{ goldRate$ | async | currency:'EUR' }}</strong></div>
            </div>
    </div>
</div>

<div class="row mb-5" *ngIf="goldRate$ | async as rate">
    <div class="col offset-md-4 col-4">
        <form (submit)="buy()" [formGroup]="form">
            <div class="form-group">
                <input class="form-control" type="number" step="0.1" placeholder="Menge (Feinunzen)" formControlName="amount">
            </div>
            <button type="submit" class="btn btn-success btn-sm btn-block">Gold kaufen f√ºr {{ form.get('amount').value * rate | currency:'EUR' }}</button>
        </form>
    </div>
</div>

<h4 class="mt-3">Letzte K√§ufe</h4>

<table class="table">
    <thead>
        <tr>
        <th>Datum</th>
        <th>Menge</th>
        <th>Kurs</th>
        <th>Gesamtpreis</th>
    </tr>
    </thead>
    <tbody>
        <tr *ngFor="let p of purchasesList$ | async">
            <td>{{ p.date | date:'medium' }}</td>
            <td>{{ p.amount | number }}</td>
            <td>{{ p.rate | currency:'EUR' }}</td>
            <td>{{ p.total | currency:'EUR' }}</td>
        </tr>
    </tbody>
</table>

<hr>

<ul class="mt-5">
  <li><strong>Wir bauen eine Anwendung zum Kauf von Gold! üèÜ</strong></li>
  <li>
    Das hei√üe Observable <code>this.goldRate$</code> liefert immer den aktuellen
    Wechselkurs.
  </li>
  <li>Mit dem Formular kannst Du Kaufaktionen ausl√∂sen. <code>this.buyActions$</code> emittiert bei jedem Kauf die gew√ºnschte Kaufmenge als
    Zahl.
  </li>
  <li class="mt-3">
    Baue einen Datenstrom, der vollst√§ndige K√§ufe mit allen Metadaten ausgibt.
  </li>
  <li>Die Metadaten werden durch das Interface <code>StockPurchase</code> definiert.</li>
  <li>Die Ergebnisse sollen in <code>this.purchases$</code> ausgegeben werden.</li>
  <li>K√§ufe mit einer Menge von 0 oder weniger sollen <strong>ignoriert</strong> werden.</li>
</ul>
